{% extends 'base.html' %}

{% block meta %}
  <title>{{ product.name }}</title>
{% endblock meta %}

{% block content %}
  <h1>{{ product.name }}</h1>

  {% if product.thumbnail %}
    <p>
      {# kalau ImageField -> pakai .url, kalau URLField -> langsung #}
      <img src="{{ product.thumbnail.url|default:product.thumbnail }}"
           alt="{{ product.name }}"
           style="max-width:200px; height:auto;">
    </p>
  {% endif %}

  <ul>
    <li>Price: Rp {{ product.price }}</li>
    <li>
      Category: {{ product.get_category_display|default:product.category }}
    </li>
    <li>Brand: {{ product.brand }}</li>
    <li>Stock: {{ product.stock }}</li>
    <li>Rating: {{ product.rating }}</li>
    <li>Featured: {{ product.is_featured }}</li>
    {% if product.user %}
      <li>Author: {{ product.user.username }}</li>
    {% endif %}
  </ul>

  <p>{{ product.description }}</p>

  <p>
    <a href="{% url 'main:show_main' %}">‚Üê Back</a>
    | <a href="{% url 'main:show_xml_by_id' product.pk %}">XML (by ID)</a>
    | <a href="{% url 'main:show_json_by_id' product.pk %}">JSON (by ID)</a>
    
    {% if request.user.is_authenticated and request.user == product.user %}
      | 
      <form action="{% url 'main:delete_product' product.pk %}"
            method="post"
            style="display:inline">
        {% csrf_token %}
        <button type="submit"
                onclick="return confirm('Yakin mau hapus produk ini?')">
          Hapus
        </button>
      </form>
    {% endif %}
  </p>
{% endblock content %}

{% load humanize %}

<article class="bg-white border border-[#E8C999] rounded-lg shadow-sm
               transition duration-200 ease-out hover:shadow-lg hover:-translate-y-1 hover:scale-[1.01]">

  <!-- Seluruh isi card bisa diklik -->
  <a href="{% url 'main:product_detail' product.pk %}" class="block p-4">

    <!-- Thumbnail -->
    <div class="aspect-[4/3] mb-4">
      {% if product.thumbnail %}
        <img src="{{ product.thumbnail }}" alt="{{ product.name }}"
             class="w-full h-full object-cover rounded-md">
      {% else %}
        <div class="w-full h-full bg-gray-100 flex items-center justify-center text-gray-400">
          No Image
        </div>
      {% endif %}
    </div>

    <!-- Brand -->
    <div class="text-xs font-semibold text-[#8E1616] uppercase mb-1">
      {{ product.brand }}
    </div>

    <!-- Nama Produk -->
    <h3 class="text-base font-bold text-[#000000] mb-2">
      {{ product.name }}
    </h3>

    <!-- Info Produk -->
    <div class="text-sm text-gray-600 mb-2">
      {% if product.category %}
        <span class="mr-2">Kategori: {{ product.category }}</span>
      {% endif %}
      <span>Stock: {{ product.stock }}</span>
    </div>

    <!-- Harga (rapi) -->
    <div class="text-lg font-bold text-[#8E1616]">
      Rp {{ product.price|intcomma }}
    </div>
  </a>

  <!-- Footer aksi owner (TIDAK di dalam <a>) -->
  {% if user.is_authenticated and product.user == user %}
    <div class="px-4 pb-4 pt-3 border-t border-[#E8C999]/60 flex items-center gap-3">
      <a href="{% url 'main:edit_product' product.pk %}"
         class="text-sm text-[#000000] hover:text-[#8E1616]">
        Edit
      </a>

      <form action="{% url 'main:delete_product' product.pk %}" method="post">
        {% csrf_token %}
        <button type="submit"
                class="text-sm text-[#8E1616] hover:text-red-700"
                onclick="return confirm('Yakin hapus produk ini?');">
          Hapus
        </button>
      </form>
    </div>
  {% endif %}
</article>
